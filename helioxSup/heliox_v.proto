# This is an alternative implementation of the protocol file for a mercury-heliox device.
# It uses the same command syntax as the labview driver, but because it asks for everything each time, is probably less efficient.
# It is probably also less resilient if an extra parameter gets added to the mercury as this would change the set of parameters received.
# We can try to use this protocol if  the short commands don't end up working against the hardware.


ReadTimeout = 1000;
WriteTimeout = 1000;
ReplyTimeout = 1000;


Terminator = LF;

# Read variables that come from the top-level "HelioxX" interface.

get_temp {
    out "@1READ:DEV:HelioxX:HEL";
    in "STAT:DEV:HelioxX:HEL"
	   ":LOWT:%*fK"
       ":BT:%*fK"
       ":NVCN:%*fmB"
       ":RCTD:%*fK"
       ":RCST:%*fK"
       ":NVHT:%*fmB"
       ":RCTE:%*fK"
       ":SRBH:%*fK"
       ":PE:%*fK"
       ":RGNA:%*fK"
       ":PCT:%*fK"
       ":SIG:H4PS:%*[^:]"
       ":STAT:%*[^:]"
       ":TEMP:%fK"
       ":TSET:%*fK"
       ":H3PS:%*[^:]"
       ":SRBS:%*[^:]"
       ":SRBR:%*fK"
       ":SCT:%*fK"
       ":NVLT:%*fmB"
}

set_temp {
    out "SET:DEV:HelioxX:HEL:SIG:TSET:%fK";
	in "STAT:DEV:HelioxX:HEL:SIG:TSET:%*fK";
}

get_temp_sp_rbv {
    out "@1READ:DEV:HelioxX:HEL";
    in "STAT:DEV:HelioxX:HEL"
	   ":LOWT:%*fK"
       ":BT:%*fK"
       ":NVCN:%*fmB"
       ":RCTD:%*fK"
       ":RCST:%*fK"
       ":NVHT:%*fmB"
       ":RCTE:%*fK"
       ":SRBH:%*fK"
       ":PE:%*fK"
       ":RGNA:%*fK"
       ":PCT:%*fK"
       ":SIG:H4PS:%*[^:]"
       ":STAT:%*[^:]"
       ":TEMP:%*fK"
       ":TSET:%fK"
       ":H3PS:%*[^:]"
       ":SRBS:%*[^:]"
       ":SRBR:%*fK"
       ":SCT:%*fK"
       ":NVLT:%*fmB"
}

get_stability {
    out "@1READ:DEV:HelioxX:HEL";
    in "STAT:DEV:HelioxX:HEL"
	   ":LOWT:%*fK"
       ":BT:%*fK"
       ":NVCN:%*fmB"
       ":RCTD:%*fK"
       ":RCST:%*fK"
       ":NVHT:%*fmB"
       ":RCTE:%*fK"
       ":SRBH:%*fK"
       ":PE:%*fK"
       ":RGNA:%*fK"
       ":PCT:%*fK"
       ":SIG:H4PS:%*[^:]"
       ":STAT:%*[^:]"
       ":TEMP:%*fK"
       ":TSET:%*fK"
       ":H3PS:%[^:]"
       ":SRBS:%*[^:]"
       ":SRBR:%*fK"
       ":SCT:%*fK"
       ":NVLT:%*fmB"
}

# Read channel temperatures.

get_temp_HE3SORB {
    out "READ:DEV:He3Sorb:TEMP";
    in "STAT:DEV:He3Sorb:TEMP"
       ":EXCT:TYPE:%*[^:]"
	   ":MAG:%*f"
       ":STAT:%*f"
       ":NICK:%*[^:]"
       ":LOOP:AUX:%*[^:]"
       ":D:%*f"
       ":HTR:%*[^:]"
       ":I:%*f"
       ":THTF:%*[^:]"
       ":HSET:%*f"
       ":PIDT:%*[^:]"
       ":ENAB:%*[^:]"
       ":SWFL:%*[^:]"
       ":FAUT:%*[^:]"
       ":FSET:%*f"
       ":PIDF:%*[^:]"
       ":P:%*f"
       ":SWMD:%*[^:]"
       ":TSET:%*fK"
       ":MAN:HVER:%*f"
       ":FVER:%*f"
       ":SERL:%*f"
       ":CAL:OFFS:%*f"
       ":COLDL:%*fK"
       ":INT:LIN:SCAL:%*f"
       ":FILE:%*[^:]"
       ":HOTL:%*fK"
       ":TYPE:%*[^:]"
       ":SIG:VOLT:%*fmV"
       ":CURR:%*fA"
       ":TEMP:%f"
       ":POWR:%*fW"
       ":RES:%*f"
       ":SLOP:%*f/K"
}


get_temp_HE4POT {
    out "READ:DEV:He4Pot:TEMP";
    in "STAT:DEV:He4Pot:TEMP"
       ":EXCT:TYPE:%*[^:]"
	   ":MAG:%*f"
       ":STAT:%*f"
       ":NICK:%*[^:]"
       ":LOOP:AUX:%*[^:]"
       ":D:%*f"
       ":HTR:%*[^:]"
       ":I:%*f"
       ":THTF:%*[^:]"
       ":HSET:%*f"
       ":PIDT:%*[^:]"
       ":ENAB:%*[^:]"
       ":SWFL:%*[^:]"
       ":FAUT:%*[^:]"
       ":FSET:%*f"
       ":PIDF:%*[^:]"
       ":P:%*f"
       ":SWMD:%*[^:]"
       ":TSET:%*fK"
       ":MAN:HVER:%*f"
       ":FVER:%*f"
       ":SERL:%*f"
       ":CAL:OFFS:%*f"
       ":COLDL:%*fK"
       ":INT:LIN:SCAL:%*f"
       ":FILE:%*[^:]"
       ":HOTL:%*fK"
       ":TYPE:%*[^:]"
       ":SIG:VOLT:%*fmV"
       ":CURR:%*fA"
       ":TEMP:%f"
       ":POWR:%*fW"
       ":RES:%*f"
       ":SLOP:%*f/K"
}


get_temp_HEHIGH {
    out "READ:DEV:HeHigh:TEMP";
    in "STAT:DEV:HeHigh:TEMP"
       ":EXCT:TYPE:%*[^:]"
	   ":MAG:%*f"
       ":STAT:%*f"
       ":NICK:%*[^:]"
       ":LOOP:AUX:%*[^:]"
       ":D:%*f"
       ":HTR:%*[^:]"
       ":I:%*f"
       ":THTF:%*[^:]"
       ":HSET:%*f"
       ":PIDT:%*[^:]"
       ":ENAB:%*[^:]"
       ":SWFL:%*[^:]"
       ":FAUT:%*[^:]"
       ":FSET:%*f"
       ":PIDF:%*[^:]"
       ":P:%*f"
       ":SWMD:%*[^:]"
       ":TSET:%*fK"
       ":MAN:HVER:%*f"
       ":FVER:%*f"
       ":SERL:%*f"
       ":CAL:OFFS:%*f"
       ":COLDL:%*fK"
       ":INT:LIN:SCAL:%*f"
       ":FILE:%*[^:]"
       ":HOTL:%*fK"
       ":TYPE:%*[^:]"
       ":SIG:VOLT:%*fmV"
       ":CURR:%*fA"
       ":TEMP:%f"
       ":POWR:%*fW"
       ":RES:%*f"
       ":SLOP:%*f/K"
}


get_temp_HELOW {
    out "READ:DEV:HeLow:TEMP";
    in "STAT:DEV:HeLow:TEMP"
       ":EXCT:TYPE:%*[^:]"
	   ":MAG:%*f"
       ":STAT:%*f"
       ":NICK:%*[^:]"
       ":LOOP:AUX:%*[^:]"
       ":D:%*f"
       ":HTR:%*[^:]"
       ":I:%*f"
       ":THTF:%*[^:]"
       ":HSET:%*f"
       ":PIDT:%*[^:]"
       ":ENAB:%*[^:]"
       ":SWFL:%*[^:]"
       ":FAUT:%*[^:]"
       ":FSET:%*f"
       ":PIDF:%*[^:]"
       ":P:%*f"
       ":SWMD:%*[^:]"
       ":TSET:%*fK"
       ":MAN:HVER:%*f"
       ":FVER:%*f"
       ":SERL:%*f"
       ":CAL:OFFS:%*f"
       ":COLDL:%*fK"
       ":INT:LIN:SCAL:%*f"
       ":FILE:%*[^:]"
       ":HOTL:%*fK"
       ":TYPE:%*[^:]"
       ":SIG:VOLT:%*fmV"
       ":CURR:%*fA"
       ":TEMP:%f"
       ":POWR:%*fW"
       ":RES:%*f"
       ":SLOP:%*f/K"
}


# Read channel temperature setpoint readbacks.

get_temp_sp_HE3SORB {
    out "READ:DEV:He3Sorb:TEMP";
    in "STAT:DEV:He3Sorb:TEMP"
       ":EXCT:TYPE:%*[^:]"
	   ":MAG:%*f"
       ":STAT:%*f"
       ":NICK:%*[^:]"
       ":LOOP:AUX:%*[^:]"
       ":D:%*f"
       ":HTR:%*[^:]"
       ":I:%*f"
       ":THTF:%*[^:]"
       ":HSET:%*f"
       ":PIDT:%*[^:]"
       ":ENAB:%*[^:]"
       ":SWFL:%*[^:]"
       ":FAUT:%*[^:]"
       ":FSET:%*f"
       ":PIDF:%*[^:]"
       ":P:%*f"
       ":SWMD:%*[^:]"
       ":TSET:%fK"
       ":MAN:HVER:%*f"
       ":FVER:%*f"
       ":SERL:%*f"
       ":CAL:OFFS:%*f"
       ":COLDL:%*fK"
       ":INT:LIN:SCAL:%*f"
       ":FILE:%*[^:]"
       ":HOTL:%*fK"
       ":TYPE:%*[^:]"
       ":SIG:VOLT:%*fmV"
       ":CURR:%*fA"
       ":TEMP:%*f"
       ":POWR:%*fW"
       ":RES:%*f"
       ":SLOP:%*f/K"
}

get_temp_sp_HE4POT {
    out "READ:DEV:He4Pot:TEMP";
    in "STAT:DEV:He4Pot:TEMP"
       ":EXCT:TYPE:%*[^:]"
	   ":MAG:%*f"
       ":STAT:%*f"
       ":NICK:%*[^:]"
       ":LOOP:AUX:%*[^:]"
       ":D:%*f"
       ":HTR:%*[^:]"
       ":I:%*f"
       ":THTF:%*[^:]"
       ":HSET:%*f"
       ":PIDT:%*[^:]"
       ":ENAB:%*[^:]"
       ":SWFL:%*[^:]"
       ":FAUT:%*[^:]"
       ":FSET:%*f"
       ":PIDF:%*[^:]"
       ":P:%*f"
       ":SWMD:%*[^:]"
       ":TSET:%fK"
       ":MAN:HVER:%*f"
       ":FVER:%*f"
       ":SERL:%*f"
       ":CAL:OFFS:%*f"
       ":COLDL:%*fK"
       ":INT:LIN:SCAL:%*f"
       ":FILE:%*[^:]"
       ":HOTL:%*fK"
       ":TYPE:%*[^:]"
       ":SIG:VOLT:%*fmV"
       ":CURR:%*fA"
       ":TEMP:%*f"
       ":POWR:%*fW"
       ":RES:%*f"
       ":SLOP:%*f/K"
}

get_temp_sp_HEHIGH {
    out "READ:DEV:HeHigh:TEMP";
    in "STAT:DEV:HeHigh:TEMP"
       ":EXCT:TYPE:%*[^:]"
	   ":MAG:%*f"
       ":STAT:%*f"
       ":NICK:%*[^:]"
       ":LOOP:AUX:%*[^:]"
       ":D:%*f"
       ":HTR:%*[^:]"
       ":I:%*f"
       ":THTF:%*[^:]"
       ":HSET:%*f"
       ":PIDT:%*[^:]"
       ":ENAB:%*[^:]"
       ":SWFL:%*[^:]"
       ":FAUT:%*[^:]"
       ":FSET:%*f"
       ":PIDF:%*[^:]"
       ":P:%*f"
       ":SWMD:%*[^:]"
       ":TSET:%fK"
       ":MAN:HVER:%*f"
       ":FVER:%*f"
       ":SERL:%*f"
       ":CAL:OFFS:%*f"
       ":COLDL:%*fK"
       ":INT:LIN:SCAL:%*f"
       ":FILE:%*[^:]"
       ":HOTL:%*fK"
       ":TYPE:%*[^:]"
       ":SIG:VOLT:%*fmV"
       ":CURR:%*fA"
       ":TEMP:%*f"
       ":POWR:%*fW"
       ":RES:%*f"
       ":SLOP:%*f/K"
}

get_temp_sp_HELOW {
    out "READ:DEV:HeLow:TEMP";
    in "STAT:DEV:HeLow:TEMP"
       ":EXCT:TYPE:%*[^:]"
	   ":MAG:%*f"
       ":STAT:%*f"
       ":NICK:%*[^:]"
       ":LOOP:AUX:%*[^:]"
       ":D:%*f"
       ":HTR:%*[^:]"
       ":I:%*f"
       ":THTF:%*[^:]"
       ":HSET:%*f"
       ":PIDT:%*[^:]"
       ":ENAB:%*[^:]"
       ":SWFL:%*[^:]"
       ":FAUT:%*[^:]"
       ":FSET:%*f"
       ":PIDF:%*[^:]"
       ":P:%*f"
       ":SWMD:%*[^:]"
       ":TSET:%fK"
       ":MAN:HVER:%*f"
       ":FVER:%*f"
       ":SERL:%*f"
       ":CAL:OFFS:%*f"
       ":COLDL:%*fK"
       ":INT:LIN:SCAL:%*f"
       ":FILE:%*[^:]"
       ":HOTL:%*fK"
       ":TYPE:%*[^:]"
       ":SIG:VOLT:%*fmV"
       ":CURR:%*fA"
       ":TEMP:%*f"
       ":POWR:%*fW"
       ":RES:%*f"
       ":SLOP:%*f/K"
}

